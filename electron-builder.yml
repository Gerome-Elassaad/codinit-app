appId: com.codinit.desktop
productName: CodinIT Desktop

directories:
  buildResources: build
  output: dist

# Only include built files - exclude everything else
files:
  - build/electron/**/*
  - build/client/**/*
  - build/server/**/*
  - package.json
  - "!**/.git"
  - "!**/node_modules/**"
  - "!dist"
  - "!src"

# electron-builder will handle node_modules automatically from package.json

extraMetadata:
  main: build/electron/main/index.mjs

# Disable asar - it can cause hanging issues
asar: false

mac:
  icon: public/icon.icns
  target: dir
  identity: null
  hardenedRuntime: false
  gatekeeperAssess: false
  # macOS specific performance options
  type: development

win:
  icon: public/icon.png
  target: nsis

linux:
  icon: public/icon.png
  target: AppImage

# Performance and security optimizations
npmRebuild: false
nodeGypRebuild: false
buildDependenciesFromSource: false

# Exclude all dev dependencies
removePackageScripts: true
